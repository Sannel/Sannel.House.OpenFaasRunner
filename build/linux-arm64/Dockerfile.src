ARG tag=2.2

FROM mcr.microsoft.com/dotnet/core/sdk:${tag} AS base
WORKDIR /src
COPY qemu-aarch64-static /usr/bin/
COPY src/ .
RUN groupadd -g 1200 house \
    && useradd -m house -g house -u 1100 \
    && chown -R house:house /src \
    && mkdir /app \
    && chown -R house:house /app
USER house